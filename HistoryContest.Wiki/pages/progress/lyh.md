# 七月上旬

## 一、HTML+CSS+JavaScript

### HTML：结构

**HTML是网页内容的载体，有以下要点：**

1. HTML文件结构

   * head
   * body

2. HTML标签

   - 行内元素和块元素（CSS中元素分类）
   - 自关闭标签
   - 标签属性

3. 语义化

   - 使用有意义的标签


   - HTML只关注内容，总是使用`<em>`、`<strong>`这样的标签，而不是`<i>`、`<b>`这样的表示样式的标签，即使他们在HTML中被允许出现



### CSS：样式

**CSS是样式表现，有以下要点：**

1. 在HTML中引入CSS的三种方法，及其优先级（逐层递减）：

   - 内联
   - 嵌入
   - 外部

2. 选择器

   - 通用、标签、类、id选择器
   - 子选择器、后代选择器
   - 分组选择符、伪类选择符

3. 布局

   - 盒子模型
   - 布局模型：流动模型、浮动模型、层模型
   - **层模型：定位** 
   - 长度单位：px、em、百分比
   - 各类居中的应用

4. 性能提示：float会给浏览器带来较大的计算量，尽可能使用绝对定位

   ​



### JavaScript

**JavaScript是行为，实现动态网页：** 

1. JS是弱类型语言，注意变量之间的隐式转换
2. JS对象
3. DOM
4. JS事件
5. 正则表达式



### 框架

**了解Bootstrap和jQuery**

应用：使用BootStrap插件实现登录页表单验证



### 前端开发规范

参见：http://codeguide.bootcss.com/



### 前端结构

在最开始时，进行了前端结构的基本设计，确定了需要哪些页面，各实现什么功能，以及页面元素基本布局。更完善的功能需求，参见requirements.pdf



## 二、网页设计

学习了网页设计流程和规范。

基本完成了三大页面的粗略设计，后续会考虑精细加工，并在答辩之前给出设计规范。

利用外部插件实现了理想的登录页面效果。



# 8月1日~2日

## 一、网页设计

* 重新设计了答题页，并且正好找到了能实现的模板（或者应该是反过来？）
* 目前有两套设计方案，配色、字体等细节仍需要优化



## 二、答题页

* 采用横向布局，可以随意拖拽或用鼠标滚动，这意味着一开始就要加载所有的网页内容？（OMG，在想要不要采用这个方案）
* 页面上有很多很多图（方案一）
* 但是不用的话我是不是白做了
* 所以还是先稳一波（方案二）
* 用了一个假的JSON，配合JS函数可以在网页加载的时候生成题目（小人才疏学浅，感觉性能要崩）



## 三、仍未解决的，即将着手解决的部分需求：

* 登录页刷新自动清除cookie
* 登录页和答题页设计风格尽量统一
* 优化如字体（图标）资源，减少冗余
* 优化样式文件，减少冗余
* 答题页的计时器和答题卡（答题卡有点难啊，emmm...）
* 判分


## 四、显然，根据requirements.pdf，还有一万条需求没有解决，也许还需要一年才能开发完毕（沉默）



# 8月4日

# 答题页

### 新增：计时器

* 用户进入欢迎界面时，不会调用计时器，当点击开始按钮后，计时器才会出现
* 这个网页是可以拖动的，用户完全可以不点开始按钮，因此画面跳转到第一题的时候，计时器也会开始计时
* 对于第二个功能，还需要测试浏览器兼容性（IE11/Edge/Webkit引擎浏览器均可实现）

### 新增：翻页功能

* 翻页功能出现方式同计时器，只有开始答题后才会提供
* 现在可以利用JavaScript实现横向翻页如丝般顺滑了

### 完善：更加“动态”的网页

- 首页显示的选择题、判断题数量和翻页页数根据题目数量改变
- 当前使用的JSON格式如下：

``` json
var init={
  'questions':[
    {'question':'南京高等师范学校继三所师范学校成为我国成立的最早的第四所国立高等师范学校，其中不是这三所学校之一的是：',
     'answers':['武昌高师','北京高师','长沙高师','广州高师'],
     'correctAnswer':3},
	{'question':'江谦认为国家的富强有赖于科学、实业的发达，先后增设了三个专修科，其中哪一个不属于这三科之一？',
     'answers':['农业','工业','商业','教育业'],
     'correctAnswer':4},
	{'question':'下面哪一项不属于郭秉文的“自动主义”？',
     'answers':['学习上的自学和自力研究','思想上的自律和自强','生活上的自立和自理','学术、文化、体育活动的自行组织和主办'],
     'correctAnswer':2},
	{'question':'下面哪一项不是南京高等师范学院办学者的宗旨（南京高等师范学院教育的特色）？',
     'answers':['倡导学生的爱国精神，为国家培养科学人才','调和文理，沟通中西，积极引进国外的先进科学技术','用科学的精神办教育，用科学的方法育才','促进教育、科学的共同发展，促进科学人才的成长和脱颖而出'],
     'correctAnswer':1}],
  
  'TFs':[
    {'question':'三江师范时期的速成科学制是1年。','correctAnswer':2},
    {'question':'三江师范时期的速成科学制是1年。','correctAnswer':2},
    {'question':'三江师范时期的速成科学制是1年。','correctAnswer':2}]
};
```

 ### 兼容性：在360浏览器的兼容模式下，该网页宣布死亡，强烈建议使用新的浏览器做题

### 接下来要做的事情：

- 完善计时器和翻页的样式
- 完善header和footer的样式
- 把翻页升级为“答题卡”，即可以看出哪些题已作答，哪些未答
- 判分功能，该功能理论上可以在前端完成，当然也可以由后端处理
- 方案二的实现：在方案一的基础上，把“东大绿背景”换为彩色动态背景，方案一中的图片改为透明色块

# 8月7日~8日

## 答题页

- 完善：计时器在计时结束后将不再显示
- 完善：翻页的样式


### 新增：答题卡

- 实现已作答和未作答的翻页样式有所区分，答题状况一目了然

### 新增：答案JSON

- 一道题对应一个数组成员，一道题重新选择后答案可以覆盖，不会生成新的成员
- JSON有两个key：name对应题目id，answer对应答案值
- 答案顺序是乱序的（相对于网页上的题号而言，因为用户可以随意决定答题顺序，这也是题目有唯一id带来的方便之处）

### 至此，答题页的功能部分基本实现（了吧），设计样式还需要调整，同时还要解决网页的自适应问题（要是所有用户都是高分辨率全屏答题该多好啊）

# 8月9日

## 答题页

- 修复：判断题中链接跳转的bug
- 移除：拖拽功能有时会产生一个影响用户体验的bug，难以排查触发条件，**现将拖拽功能移除**，仍然可以使用滚轮、分页以及按钮完成网页内跳转

### 新增：提交

- 如果用户没有完成全部题目，会给出一个善意的提示

### 新增：用户体验提升

- 用户在选择一个选项后，会自动跳转到下一题，不需要一次次点“下一题”按钮了
- 用户选择一个选项后，延迟300毫秒跳转，有足够时间进行判断是否不小心选错
- 如果用户已经选过该题，是通过分页再回过来改答案，那么不会出现自动跳转的尴尬情况
- 现在网页内的图片不会被鼠标拖拽走了


# 8月10日

## 答题页

- 修复：计时器的又一个bug
- 优化：布局的一些自适应
- 优化：精简部分代码
- 优化：每张图片都压缩至100K以下
- 修改：部分样式和配色

### 答案数组

``` json
[{"name":"question1","answer":"0"},{"name":"question2","answer":"1"},{"name":"question3","answer":"2"},{"name":"question4","answer":"3"}]
```

**说明：** 

1. 选择题answer的0~3分别对应ABCD四个选项
2. 判断题的0对应正确，1对应错误（有点奇怪？emm...没毛病）
3. 这里的questionX为占位符，之后会换为题目id

# 8月12日

## 后台页

### 没错，我又用了一个模板，可以实现的功能：

#### 成绩统计

1. 学院学生答题情况饼图

   底部显示多少人已经作答，多少人未作答

2. 成绩分布情况饼图

   底部显示平均分

3. 学院未答题学生名单

   这张表展示学号、姓名与一卡通号

4. 学院已答题学生成绩单

   这张表展示学号、姓名、一卡通号与成绩

#### 院系概览

 	该页面用于学院与学院间的比较，具体内容如何展现还需讨论

#### 用户体验

​	进入系统时，会弹出一个通知对辅导员进行“亲切”问候

#### 这个网页不是动态的

​	所有的表格目前还是手动输入，也许应该开始学习一下Webpack/Typescript/Vue.js，这样才能听懂大佬们在说什么啊

# 8月18日

## 结果页

###新增：成绩查看

### 新增：答题情况查看

- 用户可以看到哪些题正确，哪些题错误
- 查看原题：鼠标移到题号上时，可以看到原题，并且区分出正确答案和用户选择的答案

## 后台页

### 新增：动态，动态，我们要动态！

- 学院未答题学生名单现在是动态生成的了
- 学院已答题学生成绩单现在是动态生成的了
- 协商好接口后，即将进一步实现动态生成的内容：
  - 辅导员姓名
  - 学院成绩分布情况
  - 饼图
- 网页顶部导航预留了一个“刷新”按钮，用于执行异步请求

### 新增：搜索

- 两张表格都有搜索功能了
- 搜索框监听用户输入，所输即所得
- 学号、姓名、一卡通和成绩均可搜素
- 不支持模糊搜索

### 新增：排序

- 成绩可以在“升序”、“降序”、“原始”状态中切换
- 原始状态即按照学号排列的状态

## 目前已支持的API：

### 答题页取题

```json
{
    'questions':[
        {'question':'南京高等师范学校继三所师范学校成为我国成立的最早的第四所国立高等师范学校，其中不是这三所学校之一的是：','answers':['武昌高师','北京高师','长沙高师','广州高师']},
        {'question':'江谦认为国家的富强有赖于科学、实业的发达，先后增设了三个专修科，其中哪一个不属于这三科之一？','answers':['农业','工业','商业','教育业']},
        {'question':'下面哪一项不属于郭秉文的“自动主义”？','answers':['学习上的自学和自力研究','思想上的自律和自强','生活上的自立和自理','学术、文化、体育活动的自行组织和主办']},
        {'question':'下面哪一项不是南京高等师范学院办学者的宗旨（南京高等师范学院教育的特色）？','answers':['倡导学生的爱国精神，为国家培养科学人才','调和文理，沟通中西，积极引进国外的先进科学技术','用科学的精神办教育，用科学的方法育才','促进教育、科学的共同发展，促进科学人才的成长和脱颖而出']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']},
        {'question':'我是问题','answers':['我是答案','我是选项','我是选项','我是选项']}
    ],
    'TFs':[
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'},
            {'question':'三江师范时期的速成科学制是1年。'}
        ]
};
```

注意：

1. 与之前的版本相比，去掉了`correctAnswer`的键值
2. 与当前后端API不同，这里多选题的key仍然是`questions`，等待胡大佬调整即可
3. **当前版本还没有传入每道题的十六进制码（话说现在还有没有这个东西了？）**

### 结果页得分信息

```json
{   
    "score":80,
    "details":[
        {"ID":0,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":1,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":2,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":3,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":4,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":5,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":6,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":7,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":8,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":9,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":10,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":11,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":12,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":13,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":14,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":15,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":16,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":17,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":18,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":19,"rightAnswer":1,"submittedAnswer":2,"isCorrect":false},
        {"ID":20,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":21,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":22,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":23,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":24,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":25,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":26,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":27,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false},
        {"ID":28,"rightAnswer":1,"submittedAnswer":1,"isCorrect":true},
        {"ID":29,"rightAnswer":1,"submittedAnswer":0,"isCorrect":false}
    ]
}
```

注意：

1. 根据杨大佬的日志，这里的ID为题号，代表题目顺序
2. 对于多选题，0123对应ABCD，对于判断题，0对应正确，1对应错误

###提交答案

```json
[{"name":"question1","answer":"0"},{"name":"question2","answer":"1"},{"name":"question3","answer":"2"},{"name":"question4","answer":"3"}]
```

注意：

1. 答案约定同上

2. 这里的name，按照设想，若有十六进制码，则值就为hex code；

   若没有，则为题目序号，提交的顺序也许是乱序的，这取决于用户的答题顺序

3. 细心的你也许会发现，这个答案是数组，而不是标准的json格式，提交的时候需要更改一下

   （没关系，毕竟现在并没有写真正的提交语句），完善后的答案也许是这样的：

   ``` json
   {"answers":[
     {"name":"question1","answer":"0"},{"name":"question2","answer":"1"} 
     {"name":"question3","answer":"2"},{"name":"question4","answer":"3"}
   ]}
   ```

### 后台院系统计表信息

``` json
{
    'students':[
        {"ID":"09016435","Name":"杨航源","CardID":"213161269"},
        {"ID":"09016423","Name":"陈启宣","CardID":"213161299"},
        {"ID":"09016414","Name":"罗崟洪","CardID":"213163210"}
    ]
};
{
    'students':[
        {"ID":"09016435","Name":"杨航源","Score":60,"CardID":"213161269"},
        {"ID":"09016423","Name":"陈启宣","Score":100,"CardID":"213161299"},
        {"ID":"09016414","Name":"罗崟洪","Score":0,"CardID":"213163210"}
        ]
};
```

注意：

1. 按照设想，一张表对应一个json，这对于前端是有利的

# 8月19日

## 后台页

### 完善：

- 搜索功能
- 统计页面，现在辅导员姓名、完成情况、成绩分布情况、平均分和图标都是动态生成的了
- 优化`dashboard.js`与`dashboard.html`可读性

### 修复：两个column切换失效的bug

### 用户体验提升：

- 增加更多提示信息
- 增加一些“评论彩蛋”
- 导航标题增加院系名称，迎合用户习惯，同时可判断系统是否出错

## Website

### 新增：在without-vue分支搭建不使用vue的传统页面

- 结构：增加`config.js`用于几个页面的公用设置，如院系ID和名称映射表

- 整合`assets/`和`images/`下资源

  ​

  注意：

  1. 当前还没有实现页面间跳转，因为还未做与服务器交互的部分
  2. 答题页`index.html`经测试，其模板与最新版jquery(3.2.1)不兼容，使用其自带的jquery(jquery.min.js)

# 8月20日

#利用`Mock.js`实现模拟前端数据提交与后端数据返回

## 登录页

### 新增：接入模拟API，实现页面跳转

- 提交的用户名密码数据适配当前约定的JSON格式


- 根据后端返回的数据中的`role`属性值，分别实现学生登陆和辅导员登陆的页面跳转
- 若返回值中`isSuccessful`属性为`false`，则会提示检查用户名和密码
- 若提交失败，则提示检查网络状况

## 答题页

###完善：页面结构、文档可读性和业务逻辑

- 生成题目时，减少遍历次数
- 修改部分注释，减少部分无意义代码
- 优化选择答案后自动跳转的代码逻辑
- 增加页面`config`变量，增强可读性

### 新增：接入模拟API

- 题目可动态生成，页面可适配当前约定的JSON格式
- 提交的答案数组适配当前约定的JSON格式
- 成功提交后，用AJAX技术实现页面数据刷新，直接展示答题结果
- 展现的答题结果与结果页的功能相同，可以实现查看原题等功能

### 删除：`questions.js`

- `questions.js`的相关功能已由`main.js`完成
- 文档结构优化

## 结果页：我被删除啦！

###`result.html`？不存在的！

###删除：`results.js`，其功能已有`main.js`完成

# 8月21日

## 后台页

### 新增：接入模拟API，实现网页内容动态生成

- 图表和表格现在可以动态生成了

### 修复：图标label显示错误的一个bug

- 现在所有的饼图数据，若为0则不予显示，而非像之前显示为0%

### 完善：文档结构和可读性

- 减少多余嵌套
- 完善页面全局的`config`变量

# 8月22日

### Login API现已加入豪华套餐

# 9月1日

> 以下改动均对于传统前端

##登录页

### 完善：登录页API

- 登录API目前运作正常，可以根据role重定向到不同页面

- > 备注：当前登陆时若判断得用户已经登陆，会自动注销，用于开发用途，若使用传统网页则需要删除相关功能 < ! important >

## 答题页

### 新增：接入答题页相关API

- 接入`initialize` api与`question` api
- 若`isSeedSet`为`false`, 则会自动申请一个seed

## 后台页

### 新增： 接入后台页相关API

- 接入`department` api,`summary`api与`students/all`api
- 现在表格可以下载了
- 登陆时会先获取departmentID作为参数，然后动态生成其余api的请求url
- 优化代码结构，减少冗余

### 修复：又双叒叕一个bug < ! important >

- 修复在边界情况下，已答/未答图表会出现的一个显示信息异常的bug
- 修复在没有人作答的情况下，分数段图表不显示的bug，如今多了一个提示信息


# 9月2日

> **----------------------------------------对于传统前端----------------------------------------**

## 答题页

### 完善：Initialize逻辑

- 根据不同的testState对页面内容进行设置，获取题目或是显示得分

### 完善：答案数组

- 初始化网页时，生成一个包含id和answer信息的答案数组，answer初始化为-1，id按顺序生成
- 答题体验与之前保持不变
- 时间到了之后会强制提交
- 优化代码结构

## 后台页

- 显示最高分
- 显示院系名称
- 平均分现在四舍五入，保留两位小数显示
- 修复一些边界情况带来的显示异常


## 登录页

### 新增：注册功能

- 优化信息提示，若登陆失败，则提示用户名密码错误，或是尚未注册
- 点击注册，弹出注册模态框，方可进行注册，同样拥有表单检查功能
- 尚未接入API

> **----------------------------------------对于vue前端----------------------------------------**

## 登录页

###完善：背景样式

- 优化动态背景的样式，与传统前端保持一致，一张图淡出的同时下一张图淡入
- 现在打开登录页后的第一张图展示东大风最浓郁的四牌楼大礼堂
- 修复了在非全屏状态下图片错位的异常情况，现在图片可以自适应了
- 可以做到浏览器窗口调整时，填充背景的同时，图片不会被"压扁"（拉伸）

## 答题页

### 完善：滚动动画

- 现在点击开始按钮后，展示的第一道题可以在浏览器窗口水平居中
- 修复在点击页码滚动时，动画有顿挫感的异常情况

### 修复：鼠标滚动造成题目内容错位的bug

> 对于传统前端



# 9月3日

## 答题页

### 新增：用户关闭浏览器窗口后会发送logout请求

- 尚未加入重新登陆后的reset请求

## 后台页

### 新增：院系概览栏目

- 可以排序和搜索
- 可以展示图表
- 尚未在表格中显示院系的简称
- 尽量用户友好

### 新增：退出

- 没错，之前页面上的退出按钮都是假的

### 修复：图表显示异常的bug

> 对于传统前端

# 9月4日

## 登录页

### 注册

- 注册功能测试可行，注册后可以进行登陆
- 完善注册的相关提示，提示用户已存在或注册失败，或是网络异常，或是注册成功

## 答题页

### 修复

- 所有浏览器下，提交后不能正常得到结果的bug
- IE下提交后结果页不能正常显示的bug
- IE下样式异常

## 后台页

### 修复

- 图表显示细节
- EXCEL下载按钮无法正常工作的bug
- 调整图表位置

